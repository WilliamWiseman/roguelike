<!DOCTYPE html>

<html>

<body>
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
            background-color: lightblue;
            overflow-x: hidden;
            overflow-y: scroll;
        }

        .gameArea {
            position: relative;
            width: 100%;
            height: calc(100vw / 16 * 7);
            top: 0;
            left: 0;
            padding: 0px;
            margin: 0px;
            overflow-x: hidden;
            overflow-y: scroll;
            background-image: url("https://raw.githubusercontent.com/WilliamWiseman/roguelike/main/images/map1.gif");
            background-repeat: no-repeat;
            background-size: cover;

        }

        .tiles {
            z-index: 2;
            height: 3.125vw;
            width: 3.125vw;
            position: absolute;
            background-color: transparent;
        }

        .tiles::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            opacity: 0;
        }

        .tiles:hover::after {
            opacity: 0.2;
        }
    </style>
    <div id="add" class="gameArea"></div>
    <script>
        let clicking = false;
        let levelData = {
            playerStart:{
                x:0,
                y:0
            },
            clsnMap:[],
            doorPos:{
                x:0,
                y:0
            },
            chests:[]

        }
        let grid = [ //this is the collision map
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ];
        function createWorld() {
            for (let z = 0; z < 32; z++) {
                let newYarr = [];
                for (let i = 0; i < 14; i++) {
                    let tile = document.createElement('div');
                    tile.classList = "tiles";
                    tile.style.top = `${3.125 * i}vw`;
                    tile.style.left = `${3.125 * z}vw`;
                    tile.onmouseover = function () {
                        if(clicking){
                        if(grid[i][z]){
                            grid[i][z] = 0;
                            tile.style.opacity = "0";
                            tile.style.backgroundColor = "black";
                        }else{
                            grid[i][z] = 1;
                            tile.style.opacity = "0.2";
                            tile.style.backgroundColor = "red";
                        }
                    }
                    };
                    tile.onmousedown = function () {
                        if(grid[i][z]){
                            grid[i][z] = 0;
                            tile.style.opacity = "0";
                            tile.style.backgroundColor = "black";
                        }else{
                            grid[i][z] = 1;
                            tile.style.opacity = "0.2";
                            tile.style.backgroundColor = "red";
                        }
                    };
                    this.newObj = {};
                    this.newObj.block = tile;
                    document.getElementById('add').appendChild(tile); // append directly
                }
            }
        }
        createWorld();

        document.addEventListener("mousedown", function (event) {
            clicking = true;
        });
        document.addEventListener("mouseup", function (event) {
            clicking = false;
        });

        function chest(x, y, chance){
            this.x = x;
            this.y = y;
            this.chance = chance;
        }

    </script>

</body>

</html>
</html>
